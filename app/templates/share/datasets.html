{% extends "base.html" %}
{% set active_page = "share.index" %}

{% block link %}
  {{ super() }}
  <link href="/static/css/share.css" rel="stylesheet">
{% endblock %}

{% block head_ext %}
<style>
  input, select { 
    width: 100%;
  }
  .thumb {
    width: 24px;
    height: 24px;
    float: none;
    position: relative;
    top: 7px;
}

form .progress {
    line-height: 15px;
}
}

.progress {
    display: inline-block;
    width: 100px;
    border: 3px groove #CCC;
}

.progress div {
    font-size: smaller;
    background: orange;
    width: 0;
}
</style>


<script>
  var mrUUID = "{{ model_run_uuid }}";
</script>
<script src="/static/bower_components/angular/angular.min.js"></script>
<script src="/static/bower_components/ng-file-upload/ng-file-upload.min.js"></script>
<script src="/static/js/angular/controllers.js"></script>

{% endblock %}

{% block content %}

<!--<div ng-app="datasetShareApp">-->
  <!--<div ng-controller="DatasetShareCtrl">-->

    {% raw %}

    <div class="row">
      <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
        <h1>
          View or add files to resource
        </h1>
        <h2 style="text-align:center">
          <span>Resource Name:</span> <b>{{modelRunName}}</b>
        </h2>
        <h2 style="text-align:center">
          <span>Description:</span> <b>{{modelRunDescription}}</b>
        </h2>
        <h2 style="text-align:center">
          <span>Model Run UUID:</span> <b>{{modelRunUUID}}</b>
        </h2>
      </div>
    </div>
    
    <br> </br>

    <h1>Sample using ng-file-upload</h1>
    
    <form name="myForm">
      <fieldset>
        <legend>Upload on form submit</legend>
        Username:
        <input type="text" name="userName" ng-model="username" size="31" required="">
        <i ng-show="myForm.userName.$error.required">*required</i>
        <br> Photo:
        <input type="file" ngf-select="" ng-model="picFile" name="file" 
               accept="image/*" ngf-max-size="2MB" required="">
        <i ng-show="myForm.file.$error.required">*required</i>
        <br>
        <i ng-show="myForm.file.$error.maxSize">
          File too large picFile.size / 1000000|number:1 MB: max 2M
        </i>
        <img class="thumb" src="" 
             alt="" ng-show="myForm.file.$valid" ngf-thumbnail="picFile">
        <button ng-click="picFile = null" ng-show="picFile">Remove</button>
        <br>
        
        <button ng-disabled="!myForm.$valid" ng-click="uploadPic(picFile)">Submit</button>
        <span class="progress" ng-show="picFile.progress >= 0">
          <div style="width:{{picFile.progress}}%" ng-bind="picFile.progress + '%'">
          </div>
        </span>

        <span ng-show="picFile.result">Upload Successful</span>
        <span class="err" ng-show="errorMsg">{{errorMsg}}</span>
      </fieldset>
    </form>


    <h1>Upload new data</h1>
    <div class="container">
      <div style="background:#888;padding:0 0 15px;" class="col-md-8 col-md-offset-2">
      <form action="insert" method="post" enctype="multipart/form-data">
    
        <div class="col-md-12">
          <h4>Select file to upload </h4>
          <input name="file" type="file" value="" id="file"></input>
        </div>
    
        <div class="col-md-12">
          <h4>Model</h4>
          <select name="model" id="model">
            <option value="isnobal">iSNOBAL</option>
            <option value="prms">PRMS</option>
            <option value="HydroGeoSphere">CASiMiR</option>
            <option value="HydroGeoSphere">DFLOW</option>
            <option value="HydroGeoSphere">HydroGeoSphere</option>
            <option value="reference">reference</option>
          </select>
        </div>
    
        <div class="col-md-12">
          <h4>Watershed</h4>
          <select name="watershed" id="watershed">
            <option value="Valles Caldera">Valles Caldera</option>
            <option value="Dry Creek">Dry Creek</option>
            <option value="Reynolds Creek">Reynolds Creek</option>
            <option value="Lehman Creek">Lehman Creek</option>
          </select>
        </div>
    
        <div class="col-md-12">
          <h4>Description</h4>
          <input name="description" rows="5" value="" id="description"></input>
        </div>

        <div class="col-md-12">
          <h4>Model Set (inputs, outputs, or reference)</h4>
          <select id="model_set" name="model_set">
            <option value="inputs">inputs</option>
            <option value="outputs">outputs</option>
            <option value="reference">reference</option>
          </select>
        </div>
        <br>
        <div class="col-md-12">
          <input style="margin-top:20px;" class="btn btn-primary" style="width:100%" type="submit" value="Insert"/>
        </div>
      {% endraw %}
       <input style="width:100%" name="uuid" type="hidden" 
              value={{ modelRunUUID }} id="uuid"></input>
      </form>
      </div>
    </div>
    
    <h1>List of data in this resource</h1>
    
    <div style="background:lightgrey">
      {% include "common/fileList.html" %}
    </div>
    
    </div>
    <!--</div>-->
    
  <!--</div>-->
{% endblock %}
